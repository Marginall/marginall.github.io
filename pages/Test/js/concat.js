!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t="waitForImages",r=function(e){return e.srcset&&e.sizes}(new Image);e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},e.expr[":"]["has-src"]=function(t){return e(t).is('img[src][src!=""]')},e.expr[":"].uncached=function(t){return!!e(t).is(":has-src")&&!t.complete},e.fn.waitForImages=function(){var n,s,a,o=0,i=0,c=e.Deferred(),u=this,l=[],d=e.waitForImages.hasImageProperties||[],m=e.waitForImages.hasImageAttributes||[],h=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(e.isPlainObject(arguments[0])?(a=arguments[0].waitForAll,s=arguments[0].each,n=arguments[0].finished):1===arguments.length&&"boolean"===e.type(arguments[0])?a=arguments[0]:(n=arguments[0],s=arguments[1],a=arguments[2]),n=n||e.noop,s=s||e.noop,a=!!a,!e.isFunction(n)||!e.isFunction(s))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var t=e(this);a?t.find("*").addBack().each(function(){var t=e(this);t.is("img:has-src")&&!t.is("[srcset]")&&l.push({src:t.attr("src"),element:t[0]}),e.each(d,function(e,r){var n,s=t.css(r);if(!s)return!0;for(;n=h.exec(s);)l.push({src:n[2],element:t[0]})}),e.each(m,function(e,r){var n=t.attr(r);if(!n)return!0;l.push({src:t.attr("src"),srcset:t.attr("srcset"),element:t[0]})})}):t.find("img:has-src").each(function(){l.push({src:this.src,element:this})})}),o=l.length,i=0,0===o&&(n.call(u),c.resolveWith(u)),e.each(l,function(a,l){var d=new Image,m="load."+t+" error."+t;e(d).one(m,function t(r){var a=[i,o,"load"==r.type];if(i++,s.apply(l.element,a),c.notifyWith(l.element,a),e(this).off(m,t),i==o)return n.call(u[0]),c.resolveWith(u[0]),!1}),r&&l.srcset&&(d.srcset=l.srcset,d.sizes=l.sizes),d.src=l.src}),c.promise()}});