!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t="waitForImages",r=function(e){return e.srcset&&e.sizes}(new Image);e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},e.expr[":"]["has-src"]=function(t){return e(t).is('img[src][src!=""]')},e.expr[":"].uncached=function(t){return!!e(t).is(":has-src")&&!t.complete},e.fn.waitForImages=function(){var n,s,o,a=0,i=0,c=e.Deferred(),l=this,u=[],d=e.waitForImages.hasImageProperties||[],m=e.waitForImages.hasImageAttributes||[],h=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(e.isPlainObject(arguments[0])?(o=arguments[0].waitForAll,s=arguments[0].each,n=arguments[0].finished):1===arguments.length&&"boolean"===e.type(arguments[0])?o=arguments[0]:(n=arguments[0],s=arguments[1],o=arguments[2]),n=n||e.noop,s=s||e.noop,o=!!o,!e.isFunction(n)||!e.isFunction(s))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var t=e(this);o?t.find("*").addBack().each(function(){var t=e(this);t.is("img:has-src")&&!t.is("[srcset]")&&u.push({src:t.attr("src"),element:t[0]}),e.each(d,function(e,r){var n,s=t.css(r);if(!s)return!0;for(;n=h.exec(s);)u.push({src:n[2],element:t[0]})}),e.each(m,function(e,r){var n=t.attr(r);if(!n)return!0;u.push({src:t.attr("src"),srcset:t.attr("srcset"),element:t[0]})})}):t.find("img:has-src").each(function(){u.push({src:this.src,element:this})})}),a=u.length,i=0,0===a&&(n.call(l),c.resolveWith(l)),e.each(u,function(o,u){var d=new Image,m="load."+t+" error."+t;e(d).one(m,function t(r){var o=[i,a,"load"==r.type];if(i++,s.apply(u.element,o),c.notifyWith(u.element,o),e(this).off(m,t),i==a)return n.call(l[0]),c.resolveWith(l[0]),!1}),r&&u.srcset&&(d.srcset=u.srcset,d.sizes=u.sizes),d.src=u.src}),c.promise()}});